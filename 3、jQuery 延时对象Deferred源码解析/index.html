<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="box"></div>
</body>
</html>
<script src="./jQuery1.0.1.js"></script>
<script>
    var wait = function() {
        var der = $.Deferred();  //返回延迟对象
        var test = function(){
            console.log("老司机开车了");
            der.resolve("ys")   //成功  调用成功队列中的处理函数,相当于list.fire()，其实是list.fireWith()
        }
        test()
        return der  //返回延迟对象
    }
    
    // $.when(wait())  //会返回promise对象
    //     .done(function(data){   //相当于list.add  由于内部配置了memory,会调用list.fire(),因此会执行其中的方法
    //         console.log("执行成功",data)
    //     })
    //     .fail(function(){
    //         console.log("执行失败")
    //     })

    //当我们调用.then方法，也会创建一个deferred延迟对象
    // console.log(
    wait().then((res)=>{
        console.log(res + '成功回调1')
        var der = $.Deferred()
        der.resolve('ys2')
        return der
    }).then((res)=>{
        console.log(res + '成功回调2')
    })
    // )
</script>